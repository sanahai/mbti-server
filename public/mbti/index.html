<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MBTI ì„±ê²© ìœ í˜• ë¶„ì„</title>
    <style>
        /* ğŸ¨ ìŠ¤íƒ€ì¼ ì •ì˜ */
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f0f2f5; margin: 0; padding: 20px; color: #333; }
        
        /* í—¤ë” */
        header { text-align: center; margin-bottom: 30px; }
        header h3 { margin: 0; color: #2c3e50; font-size: 1.5rem; }
        .home-link { display: block; margin-top: 10px; color: #3498db; text-decoration: none; font-weight: bold; }

        /* ë©”ì¸ ë°•ìŠ¤ */
        .container { 
            max-width: 600px; margin: 0 auto; background: white; padding: 30px; 
            border-radius: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); 
            min-height: 500px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center;
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ (í™•ì‹¤í•˜ê²Œ ë³´ì´ë„ë¡ ìˆ˜ì •) */
        .btn-start { 
            background: linear-gradient(45deg, #6c5ce7, #a29bfe); color: white; border: none; 
            padding: 15px 40px; border-radius: 30px; font-size: 1.2rem; cursor: pointer; font-weight: bold; margin-top: 20px; 
        }
        
        .btn-option { 
            display: block; width: 100%; max-width: 500px; padding: 15px; margin: 10px 0; 
            border: 2px solid #e1e1e1; border-radius: 12px; background: white; 
            font-size: 1rem; cursor: pointer; transition: 0.2s; text-align: center;
        }
        .btn-option:hover { border-color: #6c5ce7; background-color: #f0f0ff; color: #6c5ce7; font-weight: bold; }

        /* ì§„í–‰ë°” */
        .progress-bar { width: 100%; height: 10px; background: #eee; border-radius: 5px; margin-bottom: 30px; overflow: hidden; }
        .progress-fill { height: 100%; background: #6c5ce7; width: 0%; transition: width 0.3s; }

        /* ê´‘ê³  ë°°ë„ˆ */
        .ad-banner { margin-top: 30px; padding: 20px; background: #f8f9fa; border: 1px dashed #ccc; color: #999; font-size: 0.9rem; width: 100%; max-width: 600px; margin-left: auto; margin-right: auto; text-align: center; }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <header>
        <a href="/" style="text-decoration: none;">
            <h3>ğŸ§  AI ì‹¬ë¦¬ ë¶„ì„ ì—°êµ¬ì†Œ</h3>
        </a>
        <a href="/" class="home-link">ğŸ  í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </header>

    <div class="container">
        
        <div id="view-start">
            <div style="font-size: 60px; margin-bottom: 20px;">ğŸ§©</div>
            <h1 style="margin-bottom: 10px;">MBTI ì •ë°€ ë¶„ì„</h1>
            <p style="color: #666; margin-bottom: 30px;">
                48ê°œ ë¬¸í•­ì„ í†µí•´ ë‹¹ì‹ ì˜ ì§„ì§œ ì„±ê²©ì„ ì°¾ì•„ëƒ…ë‹ˆë‹¤.<br>
                (ì†Œìš”ì‹œê°„: ì•½ 3ë¶„)
            </p>
            <button class="btn-start" onclick="start()">ë¶„ì„ ì‹œì‘í•˜ê¸°</button>
        </div>

        <div id="view-question" class="hidden" style="width: 100%;">
            <div class="progress-bar"><div id="bar" class="progress-fill"></div></div>
            <h3 id="q-text" style="font-size: 1.3rem; margin-bottom: 30px; line-height: 1.5;">ì§ˆë¬¸ ë‚´ìš©</h3>
            <div id="opt-box" style="width: 100%; display: flex; flex-direction: column; align-items: center;">
                </div>
        </div>

        <div id="view-loading" class="hidden">
            <div style="font-size: 50px; animation: bounce 1s infinite;">ğŸ§ </div>
            <h2>AI ë¶„ì„ ì¤‘...</h2>
            <p>ë‹¹ì‹ ì˜ ë‹µë³€ ë°ì´í„°ë¥¼ ì„œë²„ë¡œ ì „ì†¡í•˜ê³ <br>ì„±í–¥ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤.</p>
        </div>

        <div id="view-result" class="hidden">
            <h2 style="color: #6c5ce7;">ë¶„ì„ ì™„ë£Œ!</h2>
            <div id="result-text" style="background: #f8f9fa; padding: 20px; border-radius: 15px; text-align: left; margin: 20px 0; white-space: pre-wrap; line-height: 1.6;">
                ê²°ê³¼ê°€ ì—¬ê¸°ì— ë‚˜ì˜µë‹ˆë‹¤.
            </div>
            <button class="btn-start" onclick="location.reload()">ë‹¤ì‹œ í•˜ê¸°</button>
        </div>

    </div>

    <div class="ad-banner">
        [ê´‘ê³ ] ì—¬ê¸°ì— êµ¬ê¸€ ì• ë“œì„¼ìŠ¤ ì½”ë“œë¥¼ ë„£ìœ¼ì„¸ìš”.
    </div>

    <script>
        // âœ… 48ê°œ ì „ì²´ ë¬¸í•­ ë°ì´í„° (ì´ì œ ë¬¸í•­ì´ ì‚¬ë¼ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤!)
        const questions = [
            // E vs I
            { text: "ì£¼ë§ì— ì•½ì†ì´ ì—†ìœ¼ë©´ ë¶ˆì•ˆí•˜ê±°ë‚˜ ì‹¬ì‹¬í•¨ì„ ëŠë‚€ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤ (E)", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤ (I)"] },
            { text: "ìƒˆë¡œìš´ ì‚¬ëŒì„ ë§Œë‚˜ëŠ” ìë¦¬ì—ì„œ ë¨¼ì € ë§ì„ ê±°ëŠ” í¸ì´ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë§ì€ ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë¦° í›„ì—ëŠ” ì—ë„ˆì§€ê°€ ì¶©ì „ë˜ëŠ” ëŠë‚Œì´ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì£¼ëª©ë°›ëŠ” ê²ƒì„ ì¦ê¸°ê±°ë‚˜ í¬ê²Œ ì‹ ê²½ ì“°ì§€ ì•ŠëŠ”ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ìƒê°ë³´ë‹¤ ë§ì´ ë¨¼ì € ë‚˜ì˜¤ëŠ” ê²½ìš°ê°€ ë§ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "í˜¼ì ì¼í•˜ëŠ” ê²ƒë³´ë‹¤ íŒ€ìœ¼ë¡œ ì¼í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë‹¤ì–‘í•œ í™œë™ì— ì°¸ì—¬í•˜ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë‚´ ê°ì •ì„ ê²‰ìœ¼ë¡œ ì˜ í‘œí˜„í•˜ëŠ” í¸ì´ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì „í™” í†µí™”í•˜ëŠ” ê²ƒì„ ë©”ì‹œì§€ë³´ë‹¤ ì„ í˜¸í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë¹ ë¥´ê²Œ ë³€í™”í•˜ëŠ” í™˜ê²½ì—ì„œ ì¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ëª¨ì„ì—ì„œ ë¶„ìœ„ê¸° ë©”ì´ì»¤ ì—­í• ì„ ìì£¼ í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì‚¬ëŒë“¤ì„ ë§Œë‚˜ë©° ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ í‘¼ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },

            // S vs N
            { text: "ì¼ì´ ì¼ì–´ë‚  ê°€ëŠ¥ì„±ë³´ë‹¤ëŠ” í˜„ì¬ì˜ ì‚¬ì‹¤ì— ì§‘ì¤‘í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤ (S)", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤ (N)"] },
            { text: "êµ¬ì²´ì ì¸ ë°ì´í„°ì™€ ê²½í—˜ì„ ì‹ ë¢°í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë¹„ìœ ë‚˜ ì€ìœ ë³´ë‹¤ëŠ” ì§ì„¤ì ì¸ í‘œí˜„ì´ ì¢‹ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë¯¸ë˜ì˜ ìƒìƒë³´ë‹¤ëŠ” ë‹¹ì¥ ëˆˆì•ì˜ í˜„ì‹¤ì´ ì¤‘ìš”í•˜ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì‹¤ìš©ì ì´ê³  ìœ ìš©í•œ ì •ë³´ì— ê´€ì‹¬ì´ ë§ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì„¸ì„¸í•œ ë””í…Œì¼ì„ ë†“ì¹˜ì§€ ì•Šê³  ê¸°ì–µí•˜ëŠ” í¸ì´ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì „í†µê³¼ ê´€ìŠµì„ ë”°ë¥´ëŠ” ê²ƒì´ í¸í•˜ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì‹¤ì œ ê²½í—˜í•´ë³´ì§€ ì•Šì€ ê²ƒì€ ì˜ ë¯¿ì§€ ì•ŠëŠ”ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë‹¨ê³„ì ì¸ ì ˆì°¨ë¥¼ ë°Ÿì•„ ì¼í•˜ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ëœ¬êµ¬ë¦„ ì¡ëŠ” ì†Œë¦¬ë³´ë‹¤ëŠ” í˜„ì‹¤ì ì¸ ëŒ€í™”ê°€ ì¢‹ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì˜¤ê°(ì‹œê°, ì²­ê° ë“±)ìœ¼ë¡œ ëŠë¼ëŠ” ê²ƒì„ ì¤‘ìš”í•˜ê²Œ ì—¬ê¸´ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "í˜„ì¬ ìƒí™©ì— ë§ì¶° ë¬¸ì œë¥¼ í•´ê²°í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },

            // T vs F
            { text: "ì¹œêµ¬ê°€ ê³ ë¯¼ì„ ë§í•˜ë©´ ê°ì •ì  ìœ„ë¡œë³´ë‹¤ í•´ê²°ì±…ì„ ë¨¼ì € ì¤€ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤ (T)", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤ (F)"] },
            { text: "ë…¼ë¦¬ì ì´ê³  ê°ê´€ì ì¸ íŒë‹¨ì´ ê°ì •ë³´ë‹¤ ì¤‘ìš”í•˜ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ê³µì •ì„±ì„ ìœ„í•´ ì›ì¹™ì„ ì§€í‚¤ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "í† ë¡ í•  ë•Œ ìƒëŒ€ë°©ì˜ ê¸°ë¶„ë³´ë‹¤ ì‚¬ì‹¤ ì—¬ë¶€ê°€ ì¤‘ìš”í•˜ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë‚˜ëŠ” ëˆˆë¬¼ì´ ë³„ë¡œ ì—†ëŠ” í¸ì´ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë¹„íŒì ì¸ í”¼ë“œë°±ì„ ê°ì • ìƒí•˜ì§€ ì•Šê³  ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì˜ì‚¬ê²°ì •ì„ í•  ë•Œ ì¥ë‹¨ì ì„ ë¶„ì„í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ê°ì •ì— í˜¸ì†Œí•˜ëŠ” ì„¤ë“ì—ëŠ” ì˜ ë„˜ì–´ê°€ì§€ ì•ŠëŠ”ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ëª©í‘œ ë‹¬ì„±ì´ ì‚¬ëŒë“¤ì˜ ê´€ê³„ë³´ë‹¤ ìš°ì„ ì¼ ë•Œê°€ ìˆë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë¬´ëŠ¥í•œ ì‚¬ëŒì„ ë³´ë©´ ë‹µë‹µí•¨ì„ ì°¸ê¸° í˜ë“¤ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë…¼ë¦¬ì ìœ¼ë¡œ ë§ì´ ì•ˆ ë˜ë©´ ì´í•´í•˜ê¸° í˜ë“¤ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì‚¬ì‹¤ì„ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¢‹ê²Œ ë§í•˜ëŠ” ê²ƒë³´ë‹¤ ì¤‘ìš”í•˜ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },

            // J vs P
            { text: "ì—¬í–‰ì„ ê°ˆ ë•Œ ì„¸ë¶€ì ì¸ ê³„íšì„ ë¯¸ë¦¬ ì„¸ì›Œì•¼ ë§ˆìŒì´ í¸í•˜ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤ (J)", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤ (P)"] },
            { text: "ì±…ìƒì´ë‚˜ ë°©ì´ í•­ìƒ ì •ë¦¬ì •ëˆ ë˜ì–´ ìˆë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì˜ˆê¸°ì¹˜ ëª»í•œ ìƒí™©ì´ ë°œìƒí•˜ë©´ ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ëŠ”ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ë§ˆê° ê¸°í•œì„ ì² ì €íˆ ì§€í‚¤ëŠ” í¸ì´ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì¼ì„ ì‹œì‘í•˜ê¸° ì „ì— ì¤€ë¹„ë¥¼ ì™„ë²½í•˜ê²Œ í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ê²°ë¡ ì„ ë¹¨ë¦¬ ë‚´ë¦¬ëŠ” ê²ƒì„ ì„ í˜¸í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ëª©ë¡(To-do list)ì„ ì‘ì„±í•˜ê³  ì§€ì›Œë‚˜ê°€ëŠ” ê²ƒì„ ì¢‹ì•„í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ê·œì¹™ê³¼ ì²´ê³„ê°€ ì¡íŒ í™˜ê²½ì—ì„œ ì¼í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì•½ì† ì‹œê°„ì€ ë¬´ì¡°ê±´ ì§€ì¼œì•¼ í•œë‹¤ê³  ìƒê°í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "í•œ ë²ˆ ì‹œì‘í•œ ì¼ì€ ëì„ ë´ì•¼ ì§ì„±ì´ í’€ë¦°ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì¦‰í¥ì ì¸ ë§Œë‚¨ë³´ë‹¤ëŠ” ê³„íšëœ ë§Œë‚¨ì„ ì„ í˜¸í•œë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] },
            { text: "ì—¬ê°€ ì‹œê°„ë„ ê³„íšì ìœ¼ë¡œ ë³´ë‚¸ë‹¤.", options: ["ë§¤ìš° ê·¸ë ‡ë‹¤", "ê·¸ë ‡ë‹¤", "ì•„ë‹ˆë‹¤", "ì „í˜€ ì•„ë‹ˆë‹¤"] }
        ];

        let idx = 0;
        let myAnswers = [];

        const vStart = document.getElementById('view-start');
        const vQuestion = document.getElementById('view-question');
        const vLoading = document.getElementById('view-loading');
        const vResult = document.getElementById('view-result');
        const hText = document.getElementById('q-text');
        const hBox = document.getElementById('opt-box');
        const hBar = document.getElementById('bar');

        function start() {
            vStart.classList.add('hidden');
            vQuestion.classList.remove('hidden');
            show();
        }

        function show() {
            const q = questions[idx];
            hBar.style.width = ((idx / questions.length) * 100) + '%';
            hText.innerText = `Q${idx + 1}. ${q.text}`;
            
            hBox.innerHTML = '';
            q.options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'btn-option'; // í´ë˜ìŠ¤ ì´ë¦„ í™•ì‹¤íˆ ì§€ì •
                btn.innerText = opt;
                btn.onclick = () => next(q.text, opt);
                hBox.appendChild(btn);
            });
        }

        function next(q, a) {
            myAnswers.push({ question: q, answer: a });
            idx++;
            if (idx < questions.length) show();
            else finish();
        }

        async function finish() {
            vQuestion.classList.add('hidden');
            vLoading.classList.remove('hidden');
            
            try {
                // ì„œë²„ ì „ì†¡ (ê²½ë¡œ í™•ì¸ ì™„ë£Œ)
                const res = await fetch('/analyze/mbti', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({ answers: myAnswers })
                });
                
                if (!res.ok) throw new Error("ì„œë²„ ì‘ë‹µ ì˜¤ë¥˜");
                const data = await res.json();
                
                vLoading.classList.add('hidden');
                vResult.classList.remove('hidden');
                
                const box = document.getElementById('result-text');
                if (data.mbti) {
                    box.innerHTML = `<h3 style='text-align:center; font-size:2rem; color:#6c5ce7;'>${data.mbti}</h3><hr>${data.desc || data.summary || JSON.stringify(data)}`;
                } else {
                    box.innerText = "ë¶„ì„ ì‹¤íŒ¨: " + JSON.stringify(data);
                }

            } catch (err) {
                alert("ì˜¤ë¥˜ ë°œìƒ: " + err.message);
                location.reload();
            }
        }
    </script>
    
    <style>@keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-20px); } }</style>
</body>
</html>
